(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{"./app/gamma/src/components/popovers/header-member-menu/index.tsx":function(e,n,t){"use strict";t.r(n);var a=t("./packages/browser/index.ts"),o=t("./node_modules/js-cookie/src/js.cookie.js"),s=t.n(o),c=t("./app/src/components/PopoverMenu/index.ts"),r=t("./node_modules/react/index.js"),l=t.n(r),i=t("./node_modules/react-redux/es/index.js"),d=t("./app/gamma/src/selectors/members.ts"),u=t("./app/gamma/src/selectors/teams.ts");const p=e=>(e=>{var n,t;return(null!==(n=null===(t=Object(d.a)(e))||void 0===t?void 0:t.products)&&void 0!==n?n:[]).length>0})(e)||(e=>!!Object(u.c)(e).some((e=>{var n;return(null!==(n=e.products)&&void 0!==n?n:[]).length>0})))(e);var m=t("./packages/test-ids/index.ts"),g=t("./packages/i18n/index.ts"),h=t("./app/src/components/MemberAvatar/index.ts"),b=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),x=t.n(b),f=t("./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./app/gamma/src/components/popovers/account-switcher/account-item.less"),v={insert:"head",singleton:!1},j=(x()(f.a,v),f.a.locals||{});const E=({email:e,avatarSource:n,name:t,username:a,initials:o,avatars:s})=>l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:j.accountItem},l.a.createElement("div",{className:j.accountAvatar},l.a.createElement(h.b,{fullName:t,username:a,initials:o,avatars:s,avatarSource:n,size:40})),l.a.createElement("div",null,l.a.createElement("div",{className:j.accountName},t),l.a.createElement("span",{className:j.accountEmail},e))));var _=t("./packages/storage/index.ts"),k=t("./packages/config/index.ts"),w=t("./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./app/gamma/src/components/popovers/account-switcher/account-switcher.less"),A={insert:"head",singleton:!1},M=(x()(w.a,A),w.a.locals||{}),y=t("./packages/atlassian-analytics/index.ts");const O=Object(g.forTemplate)("header_account_switcher"),S=new URLSearchParams({prompt:"select_account",continue:"".concat(k.siteDomain,"/auth/atlassian/callback"),application:"trello"}),C="".concat(k.identityBaseUrl,"/login?").concat(S.toString());class F extends l.a.Component{render(){var e;const{onClickAddAccount:n,currentAccount:t,hasAddedAccount:a,hasAaAccount:o}=this.props,{name:s,email:r,id:i,avatarSource:d,initials:u,username:p,isAaMastered:m,oneTimeMessagesDismissed:g=[]}=t||{},h=null!==(e=null==t?void 0:t.avatars)&&void 0!==e?e:void 0,b=null==g?void 0:g.includes("headerMemberMenuAddAccount");return l.a.createElement(l.a.Fragment,null,l.a.createElement(E,{name:s,email:r,id:i,avatarSource:d,avatars:h,initials:u,username:p}),(m||o)&&a&&l.a.createElement(c.b,{onClick:e=>{y.Analytics.sendUIEvent({action:"clicked",actionSubject:"link",source:"memberMenuInlineDialog",actionSubjectId:"settingsSwitchAccountsLink"}),window.location.href=C},title:O("switch-account")}),l.a.createElement(c.b,{onClick:n,appendSeparator:!0},l.a.createElement("span",{className:b?"":M.addAccountNew,"data-new-string":O("new")},O("add-another-account"))))}}var I=Object(i.c)((e=>({me:Object(d.a)(e)})))((({onClickAddAccount:e,me:n,hasAaAccount:t})=>{const[a,o]=Object(r.useState)(!1);return Object(r.useEffect)((()=>{o("true"===_.TrelloStorage.get("accountSwitcherAccountAdded"))}),[]),l.a.createElement(F,{currentAccount:n,onClickAddAccount:e,hasAddedAccount:a,hasAaAccount:t})}));const T=Object(g.forTemplate)("header_member_menu");n.default=Object(i.c)((e=>{const n=Object(d.a)(e);return{canLogout:!!(n&&n.loginTypes&&n.loginTypes.length),me:n,showBillingUrl:p(e)&&!Object(a.dontUpsell)()}}))((({canLogout:e,me:n,useAccountSwitcher:t,showBillingUrl:o,onClickShortcuts:i,onClickMenuLink:d,onClickAddAccount:u,hasAaAccount:p})=>{const g=Object(r.useRef)(null);return n?l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{method:"post",action:"/logout",style:{display:"none"},ref:g},l.a.createElement("input",{name:"dsc",defaultValue:s.a.get("dsc")})),l.a.createElement(c.a,null,t&&l.a.createElement(I,{onClickAddAccount:u,hasAaAccount:p}),l.a.createElement(l.a.Fragment,null,l.a.createElement(c.c,{href:"/".concat(n.username,"/profile"),title:T("profile-and-visibility"),testId:m.HeaderTestIds.MemberMenuProfile,onClick:d}),l.a.createElement(c.c,{href:"/".concat(n.username,"/activity"),title:T("activity"),onClick:d}),l.a.createElement(c.c,{className:"js-cards",href:"/".concat(n.username,"/cards"),title:T("cards"),testId:m.HeaderTestIds.MemberMenuCards,onClick:d}),l.a.createElement(c.c,{href:"/".concat(n.username,"/account"),title:T("settings"),appendSeparator:!o,testId:m.HeaderTestIds.MemberMenuSettings,onClick:d}),o&&l.a.createElement(c.c,{href:"/".concat(n.username,"/billing"),title:T("billing"),appendSeparator:!0,onClick:d})),l.a.createElement(c.c,{appendSeparator:Object(a.isTouch)()&&n.isAaMastered,title:T("help"),href:"/contact?url=".concat(encodeURIComponent(location.href)),target:"_blank"}),!Object(a.isTouch)()&&l.a.createElement(c.b,{title:T("shortcuts"),onClick:i,appendSeparator:n.isAaMastered}),e&&l.a.createElement(c.b,{title:T("log-out"),onClick:()=>{var e;null===(e=g.current)||void 0===e||e.submit()},testId:m.HeaderTestIds.MemberMenuLogout}))):null}))},"./app/src/components/PopoverMenu/index.ts":function(e,n,t){"use strict";t.d(n,"a",(function(){return E})),t.d(n,"b",(function(){return j})),t.d(n,"c",(function(){return v}));var a=t("./node_modules/classnames/index.js"),o=t.n(a),s=t("./app/src/forwardRefComponent.ts"),c=t("./app/src/components/RouterLink/RouterLink.tsx"),r=t("./node_modules/react/index.js"),l=t.n(r),i=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),d=t.n(i),u=t("./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/PopoverMenu/PopoverMenu.less"),p={insert:"head",singleton:!1},m=(d()(u.a,p),u.a.locals||{}),g=t("./packages/a11y/index.ts");function h(){return(h=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function b(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}const x=({children:e,description:n,rawDescription:t,title:a,icon:s})=>l.a.createElement(l.a.Fragment,null,s&&l.a.cloneElement(s,{size:"small"}),l.a.createElement("span",{className:o()(m.title,n&&m.withoutMargins)},a||e),(n||t)&&l.a.createElement("p",{className:m.description},n||t)),f=({appendSeparator:e,children:n})=>l.a.createElement("li",{className:o()(m.item,e&&m.withSeparator)},n),v=e=>{let{appendSeparator:n,testId:t,href:a,target:s,className:r,onClick:i}=e,d=b(e,["appendSeparator","testId","href","target","className","onClick"]);const[u,p]=Object(g.a)();return l.a.createElement(f,{appendSeparator:n},l.a.createElement(c.b,h({className:o()(m.link,r,u&&m.linkFocusRing),href:a,testId:t,onClick:i,target:s},p),l.a.createElement(x,d)))},j=Object(s.a)("PopoverMenuButton",((e,n)=>{let{appendSeparator:t,onClick:a,className:s,disabled:c,testId:r}=e,i=b(e,["appendSeparator","onClick","className","disabled","testId"]);const[d,u]=Object(g.a)();return l.a.createElement(f,{appendSeparator:t},l.a.createElement("button",h({className:o()(m.link,d&&m.linkFocusRing,s),disabled:c,onClick:a,"data-test-id":r,ref:n},u),l.a.createElement(x,i)))})),E=({className:e,children:n,testId:t})=>l.a.createElement("nav",{className:e},l.a.createElement("ul",{"data-test-id":t},n))},"./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./app/gamma/src/components/popovers/account-switcher/account-item.less":function(e,n,t){"use strict";var a=t("./node_modules/css-loader/dist/runtime/api.js"),o=t.n(a)()(!1);o.push([e.i,"._1mpHKZNFQoLi38 {\n  padding: 4px 8px 4px 12px;\n}\n._2k76e8ni08E8cj {\n  display: flex;\n}\n._3_9rx_DdTAFtig {\n  margin-top: 4px;\n  max-width: 230px;\n}\n.mEyEHQTeZbhjil {\n  font-size: 9pt;\n  color: #B3BAC5;\n  display: block;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  max-width: 230px;\n}\n",""]),o.locals={accountAvatar:"_1mpHKZNFQoLi38",accountItem:"_2k76e8ni08E8cj",accountName:"_3_9rx_DdTAFtig",accountEmail:"mEyEHQTeZbhjil"},n.a=o},"./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./app/gamma/src/components/popovers/account-switcher/account-switcher.less":function(e,n,t){"use strict";var a=t("./node_modules/css-loader/dist/runtime/api.js"),o=t.n(a)()(!1);o.push([e.i,"._2FqRnjBMc6KDaX::after {\n  background-color: #D6ECD2;\n  color: #49852E;\n  content: attr(data-new-string);\n  margin-left: 8px;\n  border-radius: 15px;\n  padding: 2px 8px 2px 8px;\n}\n",""]),o.locals={addAccountNew:"_2FqRnjBMc6KDaX"},n.a=o},"./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/PopoverMenu/PopoverMenu.less":function(e,n,t){"use strict";var a=t("./node_modules/css-loader/dist/runtime/api.js"),o=t.n(a)()(!1);o.push([e.i,'._3Qtx4lodxp9J0E {\n  background-color: transparent;\n  border: none;\n  background: #FFFFFF;\n  border-radius: 0;\n  box-shadow: none;\n  color: #172B4D;\n  display: block;\n  height: 100%;\n  padding: 6px 12px;\n  text-align: left;\n  text-decoration: none;\n  width: 100%;\n  transition: none;\n  margin: 0;\n  outline: 0;\n}\n._3Qtx4lodxp9J0E:hover {\n  background-color: transparent;\n  border: none;\n  box-shadow: none;\n  background: rgba(9, 30, 66, 0.04);\n}\n._3Qtx4lodxp9J0E:active {\n  background-color: transparent;\n  border: none;\n  box-shadow: none;\n  background: #E4F0F6;\n}\n._3Qtx4lodxp9J0E._31k3XfnerJgTZ8:focus {\n  /*\n    TODO\n    Ideally we want to remove the global :focus override from classic.\n    It hurts accessibility and forces us to do stuff like this.\n    Once it is done, this can be removed.\n  */\n  outline: black dotted 1px;\n}\n@media screen and (-webkit-min-device-pixel-ratio: 0) {\n  ._3Qtx4lodxp9J0E._31k3XfnerJgTZ8:focus {\n    outline: -webkit-focus-ring-color auto 5px;\n  }\n}\n._3Qtx4lodxp9J0E[disabled]:active,\n._3Qtx4lodxp9J0E[disabled]:focus,\n._3Qtx4lodxp9J0E[disabled]:hover {\n  background: transparent;\n  color: #A5ADBA !important;\n}\n._3Qtx4lodxp9J0E[disabled]:active ._3Gw3Oa5-RMe50s svg,\n._3Qtx4lodxp9J0E[disabled]:focus ._3Gw3Oa5-RMe50s svg,\n._3Qtx4lodxp9J0E[disabled]:hover ._3Gw3Oa5-RMe50s svg {\n  color: #A5ADBA !important;\n}\n._3Qtx4lodxp9J0E[disabled]:active span[name="check"],\n._3Qtx4lodxp9J0E[disabled]:focus span[name="check"],\n._3Qtx4lodxp9J0E[disabled]:hover span[name="check"] {\n  color: #6B778C !important;\n}\n._3Qtx4lodxp9J0E[disabled]:active .M91aWYFMf7mrFf,\n._3Qtx4lodxp9J0E[disabled]:focus .M91aWYFMf7mrFf,\n._3Qtx4lodxp9J0E[disabled]:hover .M91aWYFMf7mrFf {\n  color: #A5ADBA !important;\n}\n._3jTRr1WChvvqHf {\n  font-size: 14px;\n  font-weight: 400;\n  line-height: 20px;\n}\n._3jTRr1WChvvqHf._2VCqfvi0epFnIK {\n  margin: 0;\n}\n.M91aWYFMf7mrFf {\n  color: #5E6C84;\n  font-size: 12px;\n  font-weight: 400;\n  line-height: 16px;\n  margin: 4px 0 0 0;\n  padding: 0;\n}\n.DIhgdvAd-R4ToE::after {\n  background-color: rgba(9, 30, 66, 0.13);\n  content: " ";\n  display: block;\n  height: 1px;\n  margin: 8px auto;\n  width: calc(100% - 20px);\n}\n',""]),o.locals={link:"_3Qtx4lodxp9J0E",linkFocusRing:"_31k3XfnerJgTZ8",icon:"_3Gw3Oa5-RMe50s",description:"M91aWYFMf7mrFf",title:"_3jTRr1WChvvqHf",withoutMargins:"_2VCqfvi0epFnIK",withSeparator:"DIhgdvAd-R4ToE"},n.a=o},"./packages/a11y/index.ts":function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var a=t("./node_modules/react/index.js");const o=(e={})=>{const[n,t]=Object(a.useState)(!1),[o,s]=Object(a.useState)(!1),[c,r]=Object(a.useState)(!1),l=()=>{o&&c||t(!0)};return[n,{onMouseEnter:n=>{s(!0),t(!1),e.onMouseEnter&&e.onMouseEnter(n)},onMouseLeave:n=>{s(!1),t(!1),e.onMouseLeave&&e.onMouseLeave(n)},onMouseDown:n=>{r(!0),t(!1),e.onMouseDown&&e.onMouseDown(n)},onKeyDown:n=>{r(!1),l(),e.onKeyDown&&e.onKeyDown(n)},onKeyUp:n=>{l(),e.onKeyUp&&e.onKeyUp(n)},onBlur:n=>{t(!1),e.onBlur&&e.onBlur(n)}}]}}}]);
//# sourceMappingURL=header-member-menu-popover.6320d6aeeb37f927b4fa.js.map